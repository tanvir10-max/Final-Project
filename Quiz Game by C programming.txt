/*
AHMED TANVIR
201953050001
NANJING UNIVERSITY OF INFORMATION SCIENCE & TECHNOLOGY
QUIZ GAME by C Programming
*/

#include<stdio.h>
#include<stdlib.h>
#include<conio.h>

struct play {
            char name[10];
            int score;
            int rat;       //star ratings
}p;

void best_score();
void start();
void help();

void main()
{
       int chc=0;

    printf("Press 1 to start the game\n2 to see best score \n3 to see game help\n0 to exit :   ");
    scanf("%d",&chc);

    switch(chc)
    {
        case 1:
        start();
        break;

        case 2:
        best_score();
        break;

        case 3:
        help();
        break;

          default:
          exit(1);
    }

  getch();
}

void help()
{
     int ch;

     printf("\n\n________________GAME HELP_____________\n");
     printf("\n_________________________________________\n");
     printf("\n __________________ Quiz Game____________\n");
     printf("\n >> There will be a total of 10 questions");
     printf("\n >> You will be given 4 options and you have to press 1, 2 ,3 or 4 for the");
     printf("\n    right option");
     printf("\n >> Each question will carry 10 points");
     printf("\n >> You will be asked questions continuously.");
     printf("\n >> There is no negative marking for wrong answer");

    printf("\n\n __________ WISH YOU LUCK___________________\n\n");


    printf("\nContinue playing ? (1/0) :  ");
    scanf("%d",&ch);

    if(ch==1)
    {
        start();
    }
    else
    {
        exit(1);
    }

}

void start()
{
          int ans;
          int count=0;
          char rating[10];

          FILE *fp;

          if((fp=fopen("\\tmp\play2.txt","a"))==NULL)
             {
                 printf("error opening file\n");
             }


        printf("\nPlease enter your nick name: ");
        scanf("%s",p.name);




        printf("____________ Welcome \" %s \"  to C Quiz Game_______________ \n\n", p.name);


        printf("Q(1).What's the Capital of China? \n 1.Beijing \t\t2.Wuhan\n 3.Nanjing\t\t 4.None of the above\n\n");

        printf("Your answer: ");
        scanf("%d",&ans);

        if(ans==1)
        {
            printf("Correct! +10 points\n\n");
            ++count;

        }
        else
        {
            printf("Wrong answer! Correct answer is 1.Beijing\n\n");
        }

        printf("Q(2)CPC stands for- \n 1.cultural party of China\t\t2.Communists party of China \n3.both of them \n4.none of them\n\n");
        printf("Your answer: ");
        scanf("%d",&ans);

        if(ans==2)
        {
            printf("Correct! +10 points\n\n");

                ++count;

        }
        else
        {
            printf("Wrong answer! Correct answer is 2.Communists party of China\n\n");
        }

        printf("Q(3) Great Wall of China situated in- \n1.Shanghai\t\t2.Beijing\n3.Zhengzhou\t4.Yangzhou\n\n");

        printf("Your answer: ");
        scanf("%d",&ans);

        if(ans==2)
        {
            printf("Correct! +10 points\n\n");

                ++count;
        }
        else
        {
            printf("Wrong answer! Correct answer is 2.Beijing\n\n");
        }


        printf("Q(4).What's the highest mountain in the world? \n1.Lhotse\t2.Mount Everest\n3.Nanga Parbat\t4.Alps\n\n");
        printf("Your answer: ");
        scanf("%d",&ans);
        if(ans==2)
        {
            printf("Correct! +10 points\n\n");

                ++count;
        }
        else
        {
            printf("Wrong answer! Correct answer is 2.Mount Everest\n\n");
        }

        printf("Q(5).In which year did World War II end? \n1.1942\t2.1943\n3.1944\t4.1945\n\n");
        printf("Your answer: ");
        scanf("%d",&ans);
        if(ans==4)
        {
            printf("Correct! +10 points\n\n");

                ++count;
        }
        else
        {
            printf("Wrong answer! Correct answer is 4.1945\n\n");
        }

        printf("Q(6).The Communists Party of China Founded in- \n1.1920\t2.1921\n3.1922\t4.1923\n\n");
        printf("Your answer: ");
        scanf("%d",&ans);
        if(ans==2)
        {
            printf("Correct! +10 points\n\n");

                ++count;
        }
        else
        {
            printf("Wrong answer! Correct answer is 2.1921\n\n");
        }

        printf("Q(7). How to say Good Morning in Chinese? \n1.晚安\t2.早上好\n3.下午好\t4.晚上好\n\n");
        printf("Your answer: ");
        scanf("%d",&ans);
        if(ans==2)
        {
            printf("Correct! +10 points\n\n");

                ++count;
        }
        else
        {
            printf("Wrong answer! Correct answer is 2.早上好\n\n");
        }
        /* YOU MUST HAVE INSTALLED CHINESE LANGUAGE ON YOUR IDE BESIDE ENGLISH*/ 

        printf("Q(8). 2022 winter olympic will be held at \n1.Beijing\t2. Madrid\n3. Tokyo \t4. London\n\n");
        printf("Your answer: ");
        scanf("%d",&ans);
        if(ans==1)
        {
            printf("Correct! +10 points\n\n");

                ++count;
        }
        else
        {
            printf("Wrong answer! Correct answer is 1.Beijing\n\n");
        }

        printf("Q(9). Which is the largest Country in the world \n1.Russia\t2.Poland\n3.China\t4.Brazil\n\n");
        printf("Your answer: ");
        scanf("%d",&ans);
        if(ans==1)
        {
            printf("Correct! +10 points\n\n");

                ++count;
        }
        else
        {
            printf("Wrong answer! Correct answer is 1.Russia\n\n");
        }

        printf("Q(10). Spring Festival usually takes place in which month? \n1.January-February\t2.March-April\n3.May-July\t4.none of them\n\n");
        printf("Your answer: ");
        scanf("%d",&ans);
        if(ans==1)
        {
            printf("Correct! +10 points\n\n");

                ++count;
        }
        else
        {
            printf("Wrong answer! Correct answer is 1. January-February\n\n");
        }

        

        //counting number of correct answers and, ratings
        if(count > 0)
        {
                printf("Thanks for playing, Your scored: %d points \t", count*10);

                p.score=count*10;

                if(p.score >= 80)
                {
                    printf("Rating: * * * * *");
                    p.rat=5;
                }
                else if(p.score >= 60 && p.score < 80)
                {
                    printf("Rating: * * * *");
                    p.rat=4;
                }
                else if(p.score >= 40 && p.score < 60)
                {
                    printf("Rating: * * *");
                  p.rat=3;
                }
                else if(p.score >= 20 && p.score < 40)
                {
                    printf("Rating: * *");
                    p.rat=2;
                }
                else if(p.score < 20)
                {
                    printf("Rating: *");
                     p.rat=1;
                }

            //writing to file

                    fprintf(fp,"%s %d %d", p.name,p.score,p.rat);
                    fclose(fp);
        }
        else
        {
            printf("Try again!");
        }
}

void best_score()
{

    int ch;

    FILE *fp;
    if((fp=fopen("\\tmp\play2.txt", "r"))==NULL)
          {
                //printf("error opening file\n");
                printf("\nNo games played yet!\n");
            }
            else
            {

    printf("\n_____________ BEST SCORE ________________\n\n");
    printf("NAME     POINTS     RATING\n");
    while(fscanf(fp,"%s %d %d",p.name,&p.score, &p.rat) !=EOF)
    {
        printf("___________________________\n");
        printf("%s     %d     %d star(s)\n\n",p.name,p.score,p.rat);
    }

    fclose(fp);

    }
    printf("\nContinue playing ? (1 - Yes and 0 - No) :  ");
    scanf("%d",&ch);

    if(ch==1)
    {
        start();
    }
    else
    {
        exit(1);
    }

}
